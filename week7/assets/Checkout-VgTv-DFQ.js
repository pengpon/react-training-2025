import{r as s,i as j,k as N,j as e,b as w,T as v}from"./index-C8jhmTRd.js";import{u as k}from"./index.esm-CDiNMIGP.js";import{U as E,c as S}from"./index-tIQ4Ry0m.js";import{a as x}from"./format-mZWKQBzJ.js";function C({title:i,titleId:t,...o},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},o),i?s.createElement("title",{id:t},i):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const F=s.forwardRef(C);function L({title:i,titleId:t,...o},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},o),i?s.createElement("title",{id:t},i):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const $=s.forwardRef(L);function z(){const i=j(),[t,o]=s.useState(!1),[r,u]=s.useState({}),[c,g]=s.useState(!1),h=()=>{g(!c)},{register:n,handleSubmit:p,formState:{errors:l}}=k(),f=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,y=async a=>{o(!0);const{message:m,...b}=a;try{const d=await S({user:b,message:m});i(`/payment/${d.data.orderId}`)}catch(d){w.error(d.message,d),v.fire({position:"top",icon:"warning",title:"Something Wrong...",color:"#fff",iconColor:"#fff",background:"#ff8f40"})}finally{o(!1)}};return s.useEffect(()=>{(async()=>{const a=await N();u(a.data.data)})()},[]),s.useEffect(()=>(t?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll"),()=>{document.body.classList.remove("no-scroll")}),[t]),e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"absolute z-50 w-screen h-screen left-0 top-0 bg-gray-800/50 "}),e.jsxs("div",{className:"py-0 flex flex-col-reverse w-full lg:w-3/4 lg:flex-row lg:items-start gap-6 text-primary-dark",children:[e.jsxs("form",{className:"mb-2 lg:mb-1 px-6 lg:py-10 w-full lg:w-1/2 lg:border-r border-gray-300",onSubmit:p(y),noValidate:!0,children:[e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"font-medium",children:[e.jsx("h2",{className:"text-xl text-gray-900",children:"Contact information"}),e.jsxs("div",{className:"my-4",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm text-gray-700",children:"Email"}),e.jsx("div",{className:"my-2",children:e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",className:"block w-full rounded-input bg-white px-3 py-2 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:outline-primary",...n("email",{required:"Enter email",pattern:{value:f,message:"Please enter a valid email address"}})})}),e.jsx("div",{className:"h-4 text-sm text-status-error",children:l.email&&l.email.message})]}),e.jsxs("div",{className:"my-2",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm text-gray-700",children:"Phone"}),e.jsx("div",{className:"my-2",children:e.jsx("input",{id:"tel",name:"tel",type:"tel",autoComplete:"tel",className:"block w-full rounded-input bg-white px-3 py-2 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:outline-primary",...n("tel",{required:"Enter tel",minLength:{value:8,message:"Enter a valid phone number"},pattern:{value:/^[0-9]+$/,message:"Enter a valid phone number"}})})}),e.jsx("div",{className:"h-4 text-sm text-status-error",children:l.tel&&l.tel.message})]})]}),e.jsx("div",{className:"w-full h-px my-10 bg-gray-200"}),e.jsxs("div",{className:"font-medium",children:[e.jsx("h2",{className:"text-xl  text-gray-900",children:"Shipping information"}),e.jsxs("div",{className:"mt-4 ",children:[e.jsxs("div",{className:"my-4",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm text-gray-700",children:"Name"}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",className:"block w-full rounded-md bg-white px-3 py-2 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:outline-primary",...n("name",{required:"Enter name"})})}),e.jsx("div",{className:"h-4 text-sm text-status-error",children:l.name&&l.name.message})]}),e.jsxs("div",{className:"my-4",children:[e.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Address"}),e.jsx("div",{className:"mt-2",children:e.jsx("input",{id:"address",name:"address",type:"text",autoComplete:"street-address",className:"block w-full rounded-md bg-white px-3 py-2 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:outline-primary",...n("address",{required:"Enter address"})})}),e.jsx("div",{className:"h-4 text-sm text-status-error",children:l.address&&l.address.message})]}),e.jsxs("div",{className:"",children:[e.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700",children:"Message"}),e.jsx("div",{className:"mt-2",children:e.jsx("textarea",{id:"message",name:"message",rows:"2",className:"block w-full rounded-md bg-white px-3 py-2 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:outline-primary",...n("message")})})]})]})]}),e.jsx("div",{className:"w-full h-px my-10 bg-gray-200"})]}),e.jsx("div",{className:"mb-4 lg:mb-0 mt-10 text-center",children:e.jsx("button",{type:"submit",className:"text-white bg-primary rounded-button px-4 py-2 hover:bg-primary-dark cursor-pointer",children:t?e.jsx(E,{width:40,height:40,color:"#fff",ariaLabel:"line-wave-loading"}):e.jsx("span",{className:"leading-10",children:"Proceed to Payment"})})})]}),e.jsxs("div",{className:"lg:w-1/2 lg:py-10 border-b border-gray-200 lg:border-0 lg:sticky lg:top-20",children:[e.jsxs("div",{className:"lg:sr-only px-6 py-4 flex items-center gap-2 text-gray-900  bg-gray-200 cursor-pointer",onClick:h,children:[e.jsx("h2",{className:" text-xl font-medium ",children:"Order summary"}),c?e.jsx($,{className:"size-4"}):e.jsx(F,{className:"size-4"})]}),e.jsx("div",{className:`grid px-0 lg:px-6 ${c?"grid-rows-[1fr]":"grid-rows-[0fr]"} lg:block transition-grid-rows duration-300`,children:e.jsxs("div",{className:"overflow-hidden lg:overflow-visible",children:[e.jsx("div",{className:"mt-6 lg:mt-0 mb-4",children:e.jsx("ul",{children:r?.carts?.map(a=>e.jsxs("li",{className:"flex gap-4 w-full mb-4",children:[e.jsxs("div",{className:"relative bg-white rounded-main flex items-center size-16 shrink-0",children:[e.jsx("img",{src:a.product.imageUrl||"",alt:"",className:"rounded-main w-full object-cover"}),e.jsx("span",{className:"absolute -top-2 -right-2 text-white bg-gray-900 px-2 py-0.5 rounded-badge text-sm",children:a.qty})]}),e.jsx("h3",{className:"grow",children:a.product.title}),e.jsxs("span",{className:"flex-end",children:["$",x(a?.total||0)]})]},a.id))})}),e.jsxs("div",{className:"flex gap-3 mb-6",children:[e.jsx("input",{type:"text",placeholder:"Discount code",className:"grow rounded-input bg-white px-3 py-2 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:outline-primary"}),e.jsx("button",{type:"button",className:"text-base border border-transparent px-4 py-2 rounded-button bg-primary hover:bg-primary-dark text-white cursor-pointer disabled:bg-gray-200 disabled:text-gray-400 disabled:border-gray-300 disabled:cursor-not-allowed",children:"Apply"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("ul",{children:[e.jsxs("li",{className:"flex",children:[e.jsxs("span",{className:"grow",children:["Subtotalãƒ»",r?.carts?.reduce((a,m)=>a+Number(m.qty),0)," ","Items"]}),e.jsxs("span",{children:["$",x(r?.total||0)]})]}),e.jsxs("li",{className:"flex",children:[e.jsx("span",{className:"grow",children:"Shipping"}),e.jsx("span",{children:"$0"})]})]})}),e.jsxs("div",{className:"flex text-xl font-medium mb-6",children:[e.jsx("span",{className:"grow",children:"Total"}),e.jsxs("span",{className:"",children:["$",x(r?.final_total||0)]})]})]})})]})]})]})}export{z as default};
