import{r as s,a as h,u as f,j as e}from"./index-BXv429K9.js";import{u as y}from"./index.esm-B7pIm5Yg.js";import{f as g,l as b,T as j}from"./axiosInstance-Chy4COHr.js";import{f as v,U as N}from"./index-DRRZ9Qgp.js";import{a as n}from"./format-mZWKQBzJ.js";const w="root",E=t=>g.post(`/api/${w}/pay/${t}`);function V(){const[t,d]=s.useState(!1),m=h(),x=f(),{id:i}=x,[o,c]=s.useState({}),{register:l,handleSubmit:u,formState:{errors:a}}=y(),p=async()=>{d(!0);try{await E(i),m("/payment/thanks")}catch(r){b.error(r.message,r),j.fire({position:"top",icon:"warning",title:r.response.data.message,color:"#fff",iconColor:"#fff",background:"#ff8f40"})}finally{d(!1)}};return s.useEffect(()=>{(async()=>{const r=await v(i);c(r.data.order)})()},[i,c]),s.useEffect(()=>(t?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll"),()=>{document.body.classList.remove("no-scroll")}),[t]),e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"absolute z-50 w-screen h-screen left-0 top-0 bg-gray-800/50 "}),e.jsxs("div",{className:"w-full lg:w-3/4 grid lg:grid-cols-2 gap-6",children:[e.jsxs("form",{action:"",className:"py-10 px-4 lg:border-r border-gray-300",onSubmit:u(p),children:[e.jsx("h2",{className:"text-xl font-medium",children:"Payment"}),e.jsxs("div",{className:"my-4",children:[e.jsx("label",{htmlFor:"credit-card",className:"block text-sm text-gray-700",children:"Credit Card Number"}),e.jsx("div",{className:"my-2",children:e.jsx("input",{id:"credit-card",name:"credit-card",type:"text",autoComplete:"credit-card",className:"block w-full rounded-input bg-white px-3 py-2 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:outline-primary",...l("credit-card",{required:"Enter a card number",pattern:{value:/^[0-9]{13,19}$/,message:"Enter a valid card number"}})})}),e.jsx("div",{className:"h-4 text-sm text-status-error",children:a["credit-card"]&&a["credit-card"].message})]}),e.jsxs("div",{className:"my-4",children:[e.jsx("label",{htmlFor:"expiration-date",className:"block text-sm text-gray-700",children:"Expiration Date"}),e.jsx("div",{className:"my-2",children:e.jsx("input",{id:"expiration-date",name:"expiration-date",type:"text",autoComplete:"expiration-date",placeholder:"(MM/YY)",className:"block w-full rounded-input bg-white px-3 py-2 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:outline-primary",...l("expiration-date",{required:"Enter expiration date",pattern:{value:/^(0[1-9]|1[0-2])\/?([0-9]{2})$/,message:"Enter a valid expiration date"}})})}),e.jsx("div",{className:"h-4 text-sm  text-status-error",children:a["expiration-date"]&&a["expiration-date"].message})]}),e.jsxs("div",{className:"my-4",children:[e.jsx("label",{htmlFor:"credit-card",className:"block text-sm text-gray-700",children:"CVV Code"}),e.jsx("div",{className:"my-2",children:e.jsx("input",{id:"cvv-code",name:"cvv-code",type:"text",autoComplete:"cvv-code",className:"block w-full rounded-input bg-white px-3 py-2 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:outline-primary",...l("cvv-code",{required:"Enter the CVV or security code on your card",pattern:{value:/^[0-9]{3,4}$/,message:"Enter the CVV or security code on your card"}})})}),e.jsx("div",{className:"h-4 text-sm text-status-error",children:a["cvv-code"]&&a["cvv-code"].message})]}),e.jsx("div",{className:"mb-4 lg:mb-0 mt-10 text-center",children:e.jsx("button",{type:"submit",className:"text-white bg-primary rounded-button px-4 py-2 hover:bg-primary-dark cursor-pointer",children:t?e.jsx(N,{width:40,height:40,color:"#fff",ariaLabel:"line-wave-loading"}):e.jsx("span",{className:"leading-10",children:"Confirm"})})})]}),e.jsxs("div",{className:"px-4 py-10 order-first lg:order-last",children:[e.jsx("h2",{className:"mb-10 text-xl font-medium text-gray-900",children:"Order Details"}),e.jsxs("div",{className:" p-2 mb-4 border-b border-gray-300",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("p",{children:"Date"}),e.jsx("p",{children:new Date(Number(String(o?.create_at).padEnd(13,"0"))||0).toLocaleDateString("zh-tw",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("p",{children:"Subtotal"}),e.jsxs("p",{children:["$",n(o?.total||0)]})]}),e.jsxs("div",{className:"text-sm flex justify-between text-gray-500 ",children:[e.jsx("p",{children:"Shipping"}),e.jsx("p",{children:"$0"})]})]}),e.jsxs("div",{className:"flex justify-between p-2 text-xl",children:[e.jsx("p",{children:"Total"}),e.jsxs("p",{children:["$",n(o?.total||0)]})]})]})]})]})}export{V as default};
